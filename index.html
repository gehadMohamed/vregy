<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title> EGYPTVR - Gehad Mohamed testing release </title>
  <meta name="description" content=" EGYPTVR By Gehad Mohamed - Web Developer with a twist :P">
  <meta name="twitter:site" content="@gehadMAmin">
  <meta name="twitter:title" content="EgyptVR By Gehad Mohamed">
  <meta name="twitter:description" content="EgyptVR a simple experiment using a frame components">
  <script src="https://aframe.io/releases/0.6.0/aframe.js"></script>
  <script src="aframe-text-geometry-component.js"></script>
  <script src="js/aframe-extras.js"></script>
  <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.js"></script>
  <script src="https://rawgit.com/protyze/aframe-curve-component/master/dist/aframe-curve-component.min.js"></script>
  <script src="https://rawgit.com/protyze/aframe-alongpath-component/master/dist/aframe-alongpath-component.min.js"></script>
</head>
<body>
  <a-scene id="dev-scene">
    <a-assets>
      <a-asset-item id="exoFont" src="fonts/exo2Black.typeface.json"></a-asset-item>
      <a-asset-item id="key" src="models/ankh2.json"></a-asset-item>
    </a-assets>
    <a-camera userHeight="1.6" look-controls position="-1.2 1.6 37">
                      <!-- raycaster="objects: .clickable" !! FAILED -->
      <a-entity id="cursor"
                cursor="fuse: true; fuseTimeout: 500"
                position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.005; radiusOuter: 0.01"
                material="color: gold; shader: flat">
          <!-- <a-animation begin="click" easing="ease-in" attribute="scale"
               fill="backwards" from="0.1 0.1 0.1" to="1 1 1" dur="150"></a-animation>
          <a-animation begin="fusing" easing="ease-in" attribute="scale"
               fill="backward" from="1 1 1" to="0.1 0.1 0.1" dur="1500"></a-animation> -->
      </a-entity>
    </a-camera>

    <a-entity  shadow="receive: true" id ="env" environment="preset: egypt;dressingAmount: 3;skyType:gradient;lightPosition: 101 5 40;skyColor:#138AD0;">
    </a-entity>
    <a-entity position="-3 1 -6" rotation="5 0 0">

      <a-entity class="clickable" id ="ankh-key"
                   cursor-listener
                   json-model="src: #key"
                   position="-2.55 3.44 48.68"
         >
         <a-animation begin="first" easing="ease-in" attribute="rotation"
                      fill="forwards" to="90 140 0" dur="1200" repeat=0></a-animation>
        <a-animation begin="first" easing="ease-in" attribute="position"
                     fill="forwards" to="-2.56 6.78 48.68" dur="1000" repeat=0></a-animation>

        <a-animation begin="second" easing="ease-in" attribute="rotation"
                     fill="forwards" from="90 140 0" to="65 67 -155" dur="2000" repeat=0></a-animation>
           <a-animation begin="second" easing="ease-in" attribute="position"
                        fill="forwards" from="-2.56 6.78 48.68"  to="14 18 50" dur="2000" repeat=0></a-animation>

        <a-animation begin="third" easing="ease-in" attribute="rotation"
                     fill="forwards" from="65 67 -155" to="48.87 11.45 178.64" dur="2000" repeat=0></a-animation>
           <a-animation begin="third" easing="ease-in" attribute="position"
                        fill="forwards" from="14 18 50"  to="38.71 13.34 17.2" dur="2000" repeat=0></a-animation>

         <a-animation begin="last" easing="ease-out" attribute="position"
                      fill="forwards" from="38.71 13.34 17.2"  to="38.71 11.778 -0.7" dur="3000" repeat=0></a-animation>

         </a-entity>


      <a-curve id="welcome-track">
        <a-curve-point position="29.1 0.1 -29.8"></a-curve-point>
        <a-curve-point position="-8.4 29.44 0"></a-curve-point>
        <a-curve-point position="-1.2 8 30"></a-curve-point>
      </a-curve>
      <a-curve id="to-track">
        <a-curve-point position="58 4.3 -10.4"></a-curve-point>
        <a-curve-point position="51.1 25.9 -1.3"></a-curve-point>
        <a-curve-point position="1.22 6 31"></a-curve-point>
      </a-curve>
      <a-curve id="egypt-track">
        <a-curve-point position="43.5 2.1 -20"></a-curve-point>
        <a-curve-point position="42 26 -0.5"></a-curve-point>
        <a-curve-point position="0 4.2 32"></a-curve-point>
      </a-curve>

      <a-entity id="welcome-light" light="angle:20.17;penumbra:0.54;intensity:2.48;distance:0.46;type:spot;decay:0;castShadow:true;color:#ffffff;groundColor:#ffffff" position="1.806 3.45 44.825" rotation="18.93 -3.38 0">
        <a-animation attribute="position"
        begin="welcome"
        delay="3000"
        dur="3000"
        fill="forwards"
        to="7.14 6.03 44.1"
        repeat="0"></a-animation>
        <a-animation attribute="rotation"
        begin="welcome"
        delay="3000"
        dur="3000"
        fill="forwards"
        to="10 20 0"
        repeat="0"></a-animation>
        <a-animation attribute="light.angle"
        begin="welcome"
        delay="3000"
        dur="3000"
        fill="forwards"
        to="40"
        repeat="0"></a-animation>
      </a-entity>

      <a-entity id = "txt-welcome" shadow="receive: false" alongpath="curve: #welcome-track;dur:3000;delay:1000000;" position="-0.5 0.5 -61.53" scale="0.6 1.2 1" text-geometry="value: WELCOME; font: #exoFont; bevelEnabled: true; bevelSize: 0.1; bevelThickness: 0.1; curveSegments: 10; size: 1.5; height: 0.5;" material="color:#ea5648; metalness:0.8; roughness: 1.0; "> <!--sphericalEnvMap: #chrome;"> -->
        <a-animation attribute="position"
        begin="welcome"
        delay="3000"
        dur="4000"
        easing="ease-out"
        fill="forwards"
        from="-1.2 8 30"
        to="-1.2 8 35"
        repeat="0"></a-animation>
      </a-entity>

      <a-entity id = "txt-to" shadow="receive: false" alongpath="curve: #to-track;dur:3000;delay:1000000;" position="-0.5 0.5 -61.53" scale="0.6 1.2 1" text-geometry="value: TO; font: #exoFont; bevelEnabled: true; bevelSize: 0.1; bevelThickness: 0.1; curveSegments: 10; size: 1.5; height: 0.5;" material="color:#ea5648; metalness:0.8; roughness: 1.0; ">
        <a-animation attribute="position"
        begin="welcome"
        delay="3000"
        dur="4000"
        easing="ease-out"
        fill="forwards"
        from="1.22 6 31"
        to="1.22 6 36"
        repeat="0"></a-animation>

      </a-entity>
      <a-entity id = "txt-egypt" shadow="receive: false" alongpath="curve: #egypt-track;dur:3000;delay:1000000;" position="-0.5 0.5 -61.53" scale="0.6 1.2 1" text-geometry="value: EGYPT; font: #exoFont; bevelEnabled: true; bevelSize: 0.1; bevelThickness: 0.1; curveSegments: 10; size: 1.5; height: 0.5;" material="color:#ea5648; metalness:0.8; roughness: 1.0; ">
        <a-animation attribute="position"
        begin="welcome"
        delay="3000"
        dur="4000"
        easing="ease-out"
        fill="forwards"
        from="0 4.2 32"
        to="0 4.2 37"
        repeat="0"></a-animation>

      </a-entity>


    </a-entity>

  </a-scene>
  <script>
  AFRAME.registerComponent('cursor-listener', {
  init: function () {
    this.el.addEventListener('fusing', function (evt) {
      var srcElementPosition = evt.srcElement.getAttribute('position');
      if(srcElementPosition.x == -2.55){
        evt.srcElement.emit('first');
      }else if(srcElementPosition.x == -2.56){
        evt.srcElement.emit('second');
      }else if(srcElementPosition.x <= 14 && srcElementPosition.x >= 13 ){
        evt.srcElement.emit('third');
      }else if(srcElementPosition.x <= 39 && srcElementPosition.x >= 38 ){
        evt.srcElement.emit('last');
        setTimeout(function(){
          var welcome = document.getElementById('txt-welcome');
          welcome.emit('welcome');
          AFRAME.utils.entity.setComponentProperty(welcome, "alongpath.delay", "0");
          var to = document.getElementById('txt-to');
          to.emit('welcome');
          AFRAME.utils.entity.setComponentProperty(to, "alongpath.delay", "0");
          var egypt = document.getElementById('txt-egypt');
          egypt.emit('welcome');
          AFRAME.utils.entity.setComponentProperty(egypt, "alongpath.delay", "0");

          document.getElementById('welcome-light').emit('welcome');


        },3000);
      }
    });
  }
  });
  </script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-102624455-1', 'auto');
  ga('send', 'pageview');

  </script>
</body>
</html>
